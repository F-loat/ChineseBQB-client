(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"102":function(A,e,t){},"25":function(A,e,t){"use strict";t.r(e);var r=t(6),n=t.n(r),o=t(1),a=t(20),i=t(121),s=t(21),c=t(0),l=2,u=function downloadFile(A){var e=A.url,t=A.header,r=A.success,n=A.fail,o=A.complete,a=void 0,i=new Promise(function(A,i){a=function createDownloadTask(A){var e=A.url,t=A.header,r=A.success,n=A.error,o=void 0,a="downloadFile",i=new XMLHttpRequest,s={"headersReceived":Object(c.a)(),"progressUpdate":Object(c.a)()};i.open("GET",e,!0),i.responseType="blob",function setHeader(A,e){var t=void 0;for(t in e)A.setRequestHeader(t,e[t])}(i,t),i.onprogress=function(A){var e=A.loaded,t=A.total;s.progressUpdate.trigger({"progress":Math.round(e/t*100),"totalBytesWritten":e,"totalBytesExpectedToWrite":t})},i.onreadystatechange=function(){i.readyState===l&&s.headersReceived.trigger({"header":i.getAllResponseHeaders()})},i.onload=function(){var A=i.response,e=i.status;r({"errMsg":a+":ok","statusCode":e,"tempFilePath":window.URL.createObjectURL(A)})},i.onabort=function(){clearTimeout(o),n({"errMsg":a+":fail abort"})},i.onerror=function(A){n({"errMsg":a+":fail "+A.message})},function send(){i.send(),o=setTimeout(function(){i.onabort=null,i.onload=null,i.onprogress=null,i.onreadystatechange=null,i.onerror=null,u(),n({"errMsg":a+":fail timeout"})},6e4)}();var u=function abort(){i.abort()},f=s.headersReceived.add,p=s.headersReceived.remove,d=s.progressUpdate.add,m=s.progressUpdate.remove;return{"abort":u,"onHeadersReceived":f,"offHeadersReceived":p,"onProgressUpdate":d,"offProgressUpdate":m}}({"url":e,"header":t,"success":function success(e){r&&r(e),o&&o(),A(e)},"error":function error(A){n&&n(A),o&&o(),i(A)}})});return i.headersReceive=a.onHeadersReceived,i.progress=a.onProgressUpdate,i.abort=a.abort,i},f=t(19),p=t(125),d=void 0,m=void 0,h=function pageScrollTo(A){var e=A.scrollTop,t=A.duration,r=void 0===t?300:t,n=A.success,o=A.fail,a=A.complete;return new Promise(function(A,t){try{if(void 0===e)throw Error('"scrollTop" is required');var i=document.querySelector(".taro-tabbar__panel")||window;d||(d=i===window?function scrollFunc(A){if(void 0===A)return window.pageYOffset;window.scrollTo(0,A)}:function scrollFunc(A){if(void 0===A)return i.scrollTop;i.scrollTop=A});var s=d(),l=e-s,u=r/17,f=Object(c.f)(c.c,u);!function scroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s+l*f(e);if(d(t),e<u)m&&clearTimeout(m),m=setTimeout(function(){scroll(e+1)},17);else{var r={"errMsg":"pageScrollTo:ok"};n&&n(r),a&&a(),A(r)}}()}catch(A){var p={"errMsg":"pageScrollTo:fail "+A.message};o&&o(p),a&&a(),t(p)}})};var g=t(8),b=t(122),v=t(2),w=t(118),y=t(123),B=t(101),E=t(32),O=t(34),P=t(42);t(102);t.d(e,"default",function(){return T});var R=function(){function defineProperties(A,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}}return function(A,e,t){return e&&defineProperties(A.prototype,e),t&&defineProperties(A,t),A}}(),j=function get(A,e,t){null===A&&(A=Function.prototype);var r=Object.getOwnPropertyDescriptor(A,e);if(void 0===r){var n=Object.getPrototypeOf(A);return null===n?void 0:get(n,e,t)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(t):void 0};function _asyncToGenerator(A){return function(){var e=A.apply(this,arguments);return new Promise(function(A,t){return function step(r,n){try{var o=e[r](n),a=o.value}catch(A){return void t(A)}if(!o.done)return Promise.resolve(a).then(function(A){step("next",A)},function(A){step("throw",A)});A(a)}("next")})}}var T=function(A){function List(A){var e=this;!function _classCallCheck(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}(this,List);var t=function _possibleConstructorReturn(A,e){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?A:e}(this,(List.__proto__||Object.getPrototypeOf(List)).call(this,A));return t.config={"navigationBarTitleText":"开源表情包","enablePullDownRefresh":!0},t.fetchImages=_asyncToGenerator(n.a.mark(function _callee(){var A,r,o,s,c;return n.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return A=t.$router.params.name,(r=Object(a.c)(A))&&(t.images=Object(E.b)(r),t.urls=t.images.map(function(A){return A.src}),t.showMoreImages(!0)),o=Object(E.d)("加载中",!!r),e.next=6,Object(i.a)({"url":"https://proxy.youngon.com.cn/github/raw/zhaoolee/ChineseBQB/master/source/_posts/"+A+".md","dataType":"其他","responseType":"text"});case 6:s=e.sent,c=s.data,Object(a.d)({"key":A,"data":c}),t.images=Object(E.b)(c),t.urls=t.images.map(function(A){return A.src}),t.showMoreImages(!0),o();case 13:case"end":return e.stop()}},_callee,e)})),t.showMoreImages=function(A){var e=t.state,r=e.images,n=e.urls,o=t.images.splice(0,30),a=t.urls.splice(0,30);A?t.setState({"images":o,"urls":a,"isLoad":!t.images.length}):t.setState({"images":r.concat(o),"urls":n.concat(a)})},t.downloadImages=_asyncToGenerator(n.a.mark(function _callee2(){var A,r,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A=t.state.images.concat(t.images),r=A[i].src,o=i+1,Object(s.b)({"title":"保存第"+o+"张中..."}),e.next=7,u({"url":r});case 7:return a=e.sent,e.next=10,Object(f.b)({"filePath":a.tempFilePath});case 10:o<A.length?t.downloadImages(o):Object(s.d)({"title":"保存完毕！","duration":5e3}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),Object(s.d)({"title":"请授予保存图片权限","icon":"none"});case 16:case"end":return e.stop()}},_callee2,e,[[0,13]])})),t.handleDownload=function(){Object(s.c)({"title":"批量下载","content":"是否批量下载本类型全部表情包","success":function success(A){return A.confirm&&t.downloadImages(0)}})},t.handlePreview=function(A){Object(p.a)({"urls":t.state.urls,"current":A})},t.randomImages=function(){var A=t.images.concat(t.state.images);t.images=A.sort(function(){return Math.random()>.5?-1:1}),t.urls=t.images.map(function(A){return A.src}),t.showMoreImages(!0),h({"scrollTop":0}),Object(s.d)({"title":"表情包已随机排序","icon":"none"})},t.updateSetting=function(){t.setState({"setting":Object(E.a)()})},t.state={"images":[],"urls":[],"setting":Object(E.a)(),"isLoad":!1},t}return function _inherits(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);A.prototype=Object.create(e&&e.prototype,{"constructor":{"value":A,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(A,e):A.__proto__=e)}(List,v["a"].Component),R(List,[{"key":"componentDidMount","value":function componentDidMount(){var A=this.$router.params.title;A&&function setNavigationBarTitle(A){var e=Object(c.l)(A);if(!e.res){var t={"errMsg":"setNavigationBarTitle"+e.msg};return console.error(t.errMsg),Promise.reject(t)}var r=A.title,n=A.success,o=A.fail,a=A.complete,i={"errMsg":"setNavigationBarTitle:ok"};return r&&"string"==typeof r?(document.title!==r&&(document.title=r),"function"==typeof n&&n(i),"function"==typeof a&&a(i),Promise.resolve(i)):(i.errMsg=Object(c.e)({"name":"setNavigationBarTitle","para":"title","correct":"String","wrong":r}),console.error(i.errMsg),"function"==typeof o&&o(i),"function"==typeof a&&a(i),Promise.reject(i))}({"title":decodeURIComponent(A)}),this.fetchImages()}},{"key":"componentDidShow","value":function componentDidShow(){this.updateSetting(),this._offReachBottom=Object(g.a)({"callback":this.onReachBottom,"ctx":this,"onReachBottomDistance":void 0}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{"key":"onPullDownRefresh","value":function(){var A=_asyncToGenerator(n.a.mark(function _callee3(){return n.a.wrap(function _callee3$(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.fetchImages();case 2:Object(b.a)();case 3:case"end":return A.stop()}},_callee3,this)}));return function onPullDownRefresh(){return A.apply(this,arguments)}}()},{"key":"onReachBottom","value":function onReachBottom(){this.images.length&&this.showMoreImages()}},{"key":"onShareAppMessage","value":function onShareAppMessage(){return{"title":this.$router.params.title}}},{"key":"render","value":function render(){var A=this,e=this.state,t=e.images,r=void 0===t?[]:t,n=e.isLoad,a=e.setting,i=a.perLineBQB,s=a.showBQBTitle,c="bqb-item-"+i;if(!r.length){var l=n?o.l.createElement(P.a,null):o.l.createElement(w.a,null);return o.l.createElement(y.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(e){e&&(A.pullDownRefreshRef=e)}},l)}var u=o.l.createElement(w.a,{"className":"list"},r.map(function(e){return o.l.createElement(O.a,{"key":e.src,"src":e.src,"name":e.name,"showTitle":s,"bqb-custom-class":c,"onClick":function onClick(){return A.handlePreview(e.src)}})}),o.l.createElement(B.a,{"className":"flat-btn random-btn","onClick":function onClick(){return A.handleDownload()},"onLongPress":function onLongPress(){return A.randomImages()}},o.l.createElement(w.a,{"className":"at-icon at-icon-download"})));return o.l.createElement(y.a,{"onRefresh":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),"ref":function ref(e){e&&(A.pullDownRefreshRef=e)}},u)}},{"key":"componentDidHide","value":function componentDidHide(){j(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidHide",this)&&j(List.prototype.__proto__||Object.getPrototypeOf(List.prototype),"componentDidHide",this).call(this),this._offReachBottom&&this._offReachBottom(),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),List}()},"32":function(A,e,t){"use strict";t.d(e,"d",function(){return a}),t.d(e,"c",function(){return i}),t.d(e,"b",function(){return s}),t.d(e,"a",function(){return c});var r=t(21),n=t(20),o=function getImageSrc(A,e){return"https://proxy.youngon.com.cn/github/raw/zhaoolee/ChineseBQB/master/"+A+"/"+e},a=function smartLoading(A,e){return Object(r.b)({"title":A}),r.a},i=function parseTypes(A){var e=A&&A.match(/\|.*已收录.*\|/g);if(!e)return[];var t=/.*master\/(.*?)\/(.*?) .*已收录(\d*)张/;return e.map(function(A){var e=A.match(t);if(!e)return{"name":"未命名","link":"","imgNum":0,"imgSrc":""};var r=e[1],n=r.replace(/^(\w)*/,"").replace(/BQB$/,""),a=e[2],i=Number(e[3]);return{"name":n,"link":"/pages/list/index?name="+r+"&title="+n,"imgSrc":o(r,a),"imgNum":i}}).filter(function(A){return!!A.imgNum}).sort(function(A,e){return e.imgNum-A.imgNum})},s=function parseImages(A){var e=A&&A.match(/\[.*?\]/g);if(!e)return[];var t=/.*master\/(.*)\/(.*)\]/;return e.map(function(A){var e=A.match(t);if(!e)return{"src":"","name":"未命名"};var r=e[1],n=e[2];return{"src":o(r,n),"name":n.replace(/\..*$/,"")}}).filter(function(A){return!!A.src})},c=function getSetting(){var A=Object(n.c)("setting")||{},e=A.perLineBQB,t=A.showBQBTitle;return{"perLineBQB":e||4,"showBQBTitle":void 0!==t&&t}}},"34":function(A,e,t){"use strict";t.d(e,"a",function(){return u});var r=t(1),n=t(2),o=t(118),a=t(119),i=t(120),s=t(35),c=t.n(s),l=(t(36),function(){function defineProperties(A,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}}return function(A,e,t){return e&&defineProperties(A.prototype,e),t&&defineProperties(A,t),A}}());var u=function(A){function BQBItem(){!function _classCallCheck(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BQBItem);var A=function _possibleConstructorReturn(A,e){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?A:e}(this,(BQBItem.__proto__||Object.getPrototypeOf(BQBItem)).apply(this,arguments));return A.handleImageLoad=function(){A.setState({"isLoad":!0})},A.handleIamgeError=function(){A.setState({"isError":!0})},A}return function _inherits(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);A.prototype=Object.create(e&&e.prototype,{"constructor":{"value":A,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(A,e):A.__proto__=e)}(BQBItem,n["a"].Component),l(BQBItem,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(A){A.src!==this.props.src&&this.setState({"isLoad":!1,"isError":!1})}},{"key":"render","value":function render(){var A=this,e=this.props,t=e.num,n=e.src,s=e.name,l=e.showTitle,u=e.onClick,f=this.state,p=f.isLoad,d=f.isError;return r.l.createElement(o.a,{"className":"bqb-item bqb-custom-class","onClick":u},r.l.createElement(o.a,{"className":"bqb-image-wrap"},r.l.createElement(a.a,{"className":"bqb-image "+(p?"":"hide"),"mode":"aspectFill","lazyLoad":!0,"src":d?c.a:n,"onLoad":function onLoad(){return A.handleImageLoad()},"onError":function onError(){return A.handleIamgeError()}}),r.l.createElement(o.a,{"className":"at-icon at-icon-settings"}),t&&r.l.createElement(i.a,{"className":"bqb-num"},t,"张"),p?null:r.l.createElement(o.a,{"className":"bqb-image bqb-loading"})),l&&r.l.createElement(i.a,{"className":"bqb-name"},s))}}]),BQBItem}();u.defaultProps={"showTitle":!0,"onClick":function onClick(){}},u.externalClasses=["bqb-custom-class"]},"35":function(A,e){A.exports="data:image/jpeg;base64,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"},"36":function(A,e,t){},"42":function(A,e,t){"use strict";t.d(e,"a",function(){return i});var r=t(1),n=t(2),o=t(120),a=(t(43),function(){function defineProperties(A,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}}return function(A,e,t){return e&&defineProperties(A.prototype,e),t&&defineProperties(A,t),A}}());var i=function(A){function ErrTips(){return function _classCallCheck(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ErrTips),function _possibleConstructorReturn(A,e){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?A:e}(this,(ErrTips.__proto__||Object.getPrototypeOf(ErrTips)).apply(this,arguments))}return function _inherits(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);A.prototype=Object.create(e&&e.prototype,{"constructor":{"value":A,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(A,e):A.__proto__=e)}(ErrTips,n["a"].Component),a(ErrTips,[{"key":"render","value":function render(){var A=this.props.text;return r.l.createElement(o.a,{"className":"err-tips"},A)}}]),ErrTips}();i.defaultProps={"text":"数据加载或解析失败，\n请稍后重试或等待版本更新"}},"43":function(A,e,t){}}]);